schema: '2.0'
stages:
  clean_data:
    cmd: python src/clean_data.py --input data/raw --output data/processed/cleaned.parquet
    deps:
    - path: data/raw
      hash: md5
      md5: 999a84d7f56033c8170e5ed74ab5feca.dir
      size: 1008101004
      nfiles: 39
    - path: src/clean_data.py
      hash: md5
      md5: 14875d88414b223f05b24c0936675068
      size: 4809
    outs:
    - path: data/processed/cleaned.parquet
      hash: md5
      md5: 647e70da534aaff0a5e1a8abf7ca2482
      size: 18583072
  feature_engineering:
    cmd: python src/feature_engineering.py --input data/processed/rent_london2.parquet
      --output data/processed/processed.parquet
    deps:
    - path: data/external/Road_LAeq_16h_London/Road_LAeq_16h_London.shp
      hash: md5
      md5: c18a2fb655039421755a5a5e3816812b
      size: 50118152
    - path: data/external/doc.kml
      hash: md5
      md5: 328e81873acdcdffdfac11e9cb856d85
      size: 109999
    - path: data/external/london_boroughs.geojson
      hash: md5
      md5: 938b61043d22d23d748f0440cdb81306
      size: 1346444
    - path: data/processed/cleaned.parquet
      hash: md5
      md5: 647e70da534aaff0a5e1a8abf7ca2482
      size: 18583072
    - path: src/feature_engineering.py
      hash: md5
      md5: 490a998d73554da7f76fe5256cfdc181
      size: 6754
    outs:
    - path: data/processed/processed.parquet
      hash: md5
      md5: aac0d7ef694eaa0dd80f00703b111ea6
      size: 21878712
  split_data:
    cmd: python src/split_data.py --data/processed/processed.parquet --train data/modelling/train.parquet
      --test data/modelling/test.parquet --test_size 0.2 --random_state 42
    deps:
    - path: data/processed/processed.parquet
      hash: md5
      md5: aac0d7ef694eaa0dd80f00703b111ea6
      size: 21878712
    - path: src/split_data.py
      hash: md5
      md5: d7168a1e0df7392140d8d4eac304a2a8
      size: 858
    outs:
    - path: data/modelling/test.parquet
      hash: md5
      md5: 802cbad07caeeec8ce19d9f61cdf6a56
      size: 4519171
    - path: data/modelling/train.parquet
      hash: md5
      md5: 6f5d92d5fcddfa79038eedba2f2534b9
      size: 17650064
  train_model:
    cmd: python src/train.py --train data/modelling/train.parquet --params models/best_params.pkl
      --output models/catboost_model_no_nlp.pkl
    deps:
    - path: data/modelling/train.parquet
      hash: md5
      md5: 6f5d92d5fcddfa79038eedba2f2534b9
      size: 17650064
    - path: models/best_params.pkl
      hash: md5
      md5: 2c0cf05255f2b5df5cfc9a90f131be5d
      size: 303
    - path: src/train.py
      hash: md5
      md5: 59c7d61a73e4b5e0beb1cf042c8d3c3f
      size: 1223
    outs:
    - path: models/catboost_model_no_nlp.pkl
      hash: md5
      md5: 7d226328e01a0aa9ce564015976f76fd
      size: 19318349
  evaluate_model:
    cmd: python src/evaluate.py --test data/modelling/test.parquet --model models/catboost_model_no_nlp.pkl
    deps:
    - path: data/modelling/test.parquet
      hash: md5
      md5: 802cbad07caeeec8ce19d9f61cdf6a56
      size: 4519171
    - path: models/catboost_model_no_nlp.pkl
      hash: md5
      md5: 7d226328e01a0aa9ce564015976f76fd
      size: 19318349
  tune_model:
    cmd: python src/tune_hyperparameters.py --train data/modelling/train.parquet --output_model
      models/tuned_model.pkl --output_params models/best_params.pkl
    deps:
    - path: data/modelling/train.parquet
      hash: md5
      md5: 6f5d92d5fcddfa79038eedba2f2534b9
      size: 17650064
    - path: params.yaml
      hash: md5
      md5: c6c5db61a3b71509eec25528592f831a
      size: 1366
    - path: src/tune_hyperparameters.py
      hash: md5
      md5: 23fa7abdabc55622b6abf152b1ced96f
      size: 1924
    outs:
    - path: models/best_params.pkl
      hash: md5
      md5: 2c0cf05255f2b5df5cfc9a90f131be5d
      size: 303
