schema: '2.0'
stages:
  clean_data:
    cmd: python src/clean_data.py --input data/raw --output data/processed/cleaned.parquet
    deps:
    - path: data/raw
      hash: md5
      md5: 999a84d7f56033c8170e5ed74ab5feca.dir
      size: 1008101004
      nfiles: 39
    - path: src/clean_data.py
      hash: md5
      md5: c4a1181976c64599d5901fd9f6499c09
      size: 4867
    outs:
    - path: data/processed/cleaned.parquet
      hash: md5
      md5: 647e70da534aaff0a5e1a8abf7ca2482
      size: 18583072
  feature_engineering:
    cmd: python src/feature_engineering.py --input data/processed/rent_london2.parquet
      --output data/processed/processed.parquet
    deps:
    - path: data/external/Road_LAeq_16h_London/Road_LAeq_16h_London.shp
      hash: md5
      md5: c18a2fb655039421755a5a5e3816812b
      size: 50118152
    - path: data/external/doc.kml
      hash: md5
      md5: 328e81873acdcdffdfac11e9cb856d85
      size: 109999
    - path: data/external/london_boroughs.geojson
      hash: md5
      md5: 938b61043d22d23d748f0440cdb81306
      size: 1346444
    - path: data/processed/cleaned.parquet
      hash: md5
      md5: 647e70da534aaff0a5e1a8abf7ca2482
      size: 18583072
    - path: src/feature_engineering.py
      hash: md5
      md5: d1a735d473a2d6c3b73bb47291c48993
      size: 6784
    outs:
    - path: data/processed/processed.parquet
      hash: md5
      md5: df7ab5d4fdcb7d07fb364cd945102d3c
      size: 21899011
  split_data:
    cmd: python src/split_data.py --data/processed/processed.parquet --train data/modelling/train.parquet
      --test data/modelling/test.parquet --test_size 0.2 --random_state 42
    deps:
    - path: data/processed/processed.parquet
      hash: md5
      md5: df7ab5d4fdcb7d07fb364cd945102d3c
      size: 21899011
    - path: src/split_data.py
      hash: md5
      md5: a91f1e9ce0538efe0a2eb795c8b1b1c1
      size: 884
    outs:
    - path: data/modelling/test.parquet
      hash: md5
      md5: a6aac8d6f13d201b51e14ff6516ca617
      size: 4503464
    - path: data/modelling/train.parquet
      hash: md5
      md5: d242dc7b2a12b24cf280de8818b5d0db
      size: 17641399
  train_model:
    cmd: python src/train.py --train data/modelling/train.parquet --params models/best_params.pkl
      --output models/catboost_model_no_nlp.pkl
    deps:
    - path: data/modelling/train.parquet
      hash: md5
      md5: d242dc7b2a12b24cf280de8818b5d0db
      size: 17641399
    - path: models/best_params.pkl
      hash: md5
      md5: 1668e7c828ace43814c7fe123e4060ac
      size: 303
    - path: src/train.py
      hash: md5
      md5: 6f8a232bcc8b336eefa8ff3bf90a8bb6
      size: 1241
    outs:
    - path: models/catboost_model_no_nlp.pkl
      hash: md5
      md5: b16f5fed928e9a8d42e87ae85fa0bea7
      size: 39240585
  evaluate_model:
    cmd: python src/evaluate.py --test data/modelling/test.parquet --model models/catboost_model_no_nlp.pkl
    deps:
    - path: data/modelling/test.parquet
      hash: md5
      md5: a6aac8d6f13d201b51e14ff6516ca617
      size: 4503464
    - path: models/catboost_model_no_nlp.pkl
      hash: md5
      md5: b16f5fed928e9a8d42e87ae85fa0bea7
      size: 39240585
  tune_model:
    cmd: python src/tune_hyperparameters.py --train data/modelling/train.parquet --output_model
      models/tuned_model.pkl --output_params models/best_params.pkl
    deps:
    - path: data/modelling/train.parquet
      hash: md5
      md5: d242dc7b2a12b24cf280de8818b5d0db
      size: 17641399
    - path: params.yaml
      hash: md5
      md5: c6c5db61a3b71509eec25528592f831a
      size: 1366
    - path: src/tune_hyperparameters.py
      hash: md5
      md5: a15f16b255ea1c86e02d183054e7d82d
      size: 2033
    outs:
    - path: models/best_params.pkl
      hash: md5
      md5: 1668e7c828ace43814c7fe123e4060ac
      size: 303
